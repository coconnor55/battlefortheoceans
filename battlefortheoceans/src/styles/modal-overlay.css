/* src/styles/modal-overlay.css v1.0.5 */
/* Copyright(c) 2025, Clint H. O'Connor */
/* Modal and overlay components */
/* v1.0.5: Fixed modal overlay positioning and close button visibility
 *         - Increased padding-top from 60px to 80px to prevent NavBar overlap
 *         - Enhanced close button styling for better visibility (white text, themed border)
 *         - Consistent across Stats, Achievements, and Error Console
 */

/* ============================================
   CONTENT OVERLAY / PANES
   ============================================ */

/* Content pane - semi-transparent overlay for readability over background */
.content-pane {
  background: var(--bg-overlay);
  backdrop-filter: blur(10px);
  border-radius: var(--border-radius-lg);
  /* Reduced padding for larger sizes (was var(--space-xl), now var(--space-md)) */
  padding: var(--space-md);
  box-shadow: var(--shadow-lg);
  border: 1px solid var(--border-subtle);
  max-width: 600px;
  width: 80vw;
  
  /* Fixed positioning to stay in place while background scrolls */
  position: fixed;
  top: 50%;
  left: 50%;
  transform: translate(-50%, -50%);

  /* Make scrollable */
  max-height: 95vh;
  overflow-y: auto;
  overflow-x: visible; /* Allow horizontal overflow for game board */
  -webkit-overflow-scrolling: touch;
}

/* v1.0.4: Grow to 95vw as viewport shrinks */
.content-pane--wide {
  /* Container grows to 95vw as viewport shrinks (gaps on sides shrink) */
  max-width: 95vw;
  overflow-x: visible; /* Allow game board to extend if needed */
}

/* OverPage centering */
.over-page {
  display: flex;
  justify-content: center;
  align-items: flex-start;
  padding-top: 60px; /* Account for NavBar */
  min-height: calc(100vh - 60px);
}

.over-page .content-pane--wide {
  margin: var(--space-md) auto;
}

.content-pane--medium {
  max-width: 1024px;
}

.content-pane--narrow {
  max-width: 500px;
}

/* For full-page overlays */
.page-overlay {
  background: var(--bg-overlay);
  backdrop-filter: blur(10px);
  min-height: 100vh;
  padding: var(--space-lg);
}

/* ============================================
   MODAL / DIALOG
   ============================================ */

.modal-overlay {
  position: fixed;
  top: 0;
  left: 0;
  right: 0;
  bottom: 0;
  background: rgba(0, 0, 0, 0.8);
  display: flex;
  align-items: flex-start;
  justify-content: center;
  padding-top: 80px; /* Account for fixed NavBar with proper clearance */
  z-index: 200; /* Above NavBar (z-index 100) */
  animation: fadeIn var(--transition-speed) ease-in;
  overflow-y: auto;
  -webkit-overflow-scrolling: touch;
}

.modal-overlay--transparent {
  background: transparent;
}

.modal {
    margin-top: 40px;
  background: var(--bg-medium);
  border: 2px solid var(--border-color);
  border-radius: var(--border-radius-lg);
  padding: var(--space-lg);
  max-width: 90%;
  max-height: 90vh;
  overflow-y: auto;
  box-shadow: var(--shadow-lg);
  animation: slideInUp var(--transition-speed) ease-out;
}

.modal__header {
  display: flex;
  justify-content: space-between;
  align-items: center;
  margin-bottom: var(--space-lg);
  padding-bottom: var(--space-md);
  border-bottom: 1px solid var(--border-subtle);
}

.modal__title {
  margin: 0;
  color: var(--primary);
  font-size: 1.5rem;
}

.modal__close {
  background: transparent;
  border: none;
  color: var(--text-dim);
  font-size: 1.5rem;
  cursor: pointer;
  transition: all var(--transition-fast);
  padding: var(--space-xs);
}

.modal__close:hover {
  color: var(--text-primary);
  transform: scale(1.1);
}

.modal__body {
  margin-bottom: var(--space-lg);
  color: var(--text-secondary);
}

.modal__footer {
  display: flex;
  justify-content: flex-end;
  gap: var(--space-md);
  padding-top: var(--space-md);
  border-top: 1px solid var(--border-subtle);
}

/* ============================================
   STRUCTURAL ELEMENTS (used with content-pane)
   ============================================ */

/* Header section with bottom border */
.card-header {
  margin-bottom: var(--space-sm);
  padding-bottom: var(--space-sm);
  border-bottom: 1px solid var(--border-subtle);
}

/* Card header with close button support */
.card-header--with-close {
  display: flex;
  justify-content: space-between;
  align-items: flex-start;
  gap: var(--space-md);
}

/* Enhanced close button visibility */
.card-header--with-close .btn--secondary {
  color: var(--text-primary);
  border-color: var(--primary);
  font-size: 1.25rem;
  padding: var(--space-xs) var(--space-sm);
  min-width: 36px;
  font-weight: bold;
}

.card-header--with-close .btn--secondary:hover {
  background: var(--primary);
  color: var(--bg-dark);
}

/* Body section */
.card-body {
  color: var(--text-secondary);
}

/* Footer section with top border */
.card-footer {
  margin-top: var(--space-md);
  padding-top: var(--space-md);
  border-top: 1px solid var(--border-subtle);
  display: flex;
  justify-content: flex-end;
  gap: var(--space-sm);
}

/* Main heading */
.card-title {
  margin: 0;
  color: var(--primary);
  font-size: 1.5rem;
}

/* Secondary text */
.card-subtitle {
  margin: var(--space-sm) 0 0 0;
  color: var(--text-dim);
  font-size: 0.875rem;
}

/* Panel (lightweight alternative to content-pane) */
.panel {
  background: var(--bg-overlay);
  border: 1px solid var(--border-color);
  border-radius: var(--border-radius-md);
  padding: var(--space-lg);
  box-shadow: var(--shadow);
  backdrop-filter: blur(10px);
}

/* ============================================
   CARD SYSTEM
   ============================================ */

/* Card - themed styling matching current theme */
.card {
  background: var(--bg-overlay);
  backdrop-filter: blur(10px);
  border-radius: var(--border-radius-lg);
  padding: var(--space-xl);
  box-shadow: var(--shadow-lg);
  border: 1px solid var(--border-subtle);
  max-width: 600px;
  margin: 0 auto;
}

.card--narrow {
  max-width: 400px;
}

.card--medium {
    max-width: 600px;
}

/* v1.0.4: Fixed width to prevent horizontal movement */
.card--wide {
  width: 1400px;
  max-width: 95vw;
}

/* Card - white background variant */
.card.white {
  background: #FFFFFF;
  backdrop-filter: none;
  color: #333333;
  border: 1px solid #E0E0E0;
  box-shadow: 0 4px 20px rgba(0, 0, 0, 0.15);
}

.card.white .card-title {
  color: #333333;
}

.card.white .card-subtitle {
  color: #666666;
}

.card.white .form-label {
  color: #333333;
}

.card.white .form-input {
  background: #F8F9FA;
  color: #333333;
  border: 1px solid #D0D0D0;
}

.card.white .form-input:focus {
  border-color: #007BFF;
  box-shadow: 0 0 5px rgba(0, 123, 255, 0.3);
}

.card.white .form-help {
  color: #666666;
}

.card.white .form-error {
  color: #DC3545;
}

/* ============================================
   MOBILE FIXES
   ============================================ */

/* Mobile: Align modal content to top to prevent cutoff - ONLY for modal overlays */
@media (max-width: 768px) {
  .modal-overlay {
    align-items: flex-start;
    padding: 0;
    padding-top: 80px; /* Account for fixed NavBar with proper clearance */
    overflow-y: auto;
    -webkit-overflow-scrolling: touch;
    overscroll-behavior: contain;
  }
  
  /* Only apply full-height to content panes INSIDE modal overlays */
  .modal-overlay .content-pane {
    margin: 0;
    min-height: calc(100vh - 60px); /* Account for NavBar */
    max-height: none;
    width: 100%;
    max-width: 100%;
    border-radius: 0;
    padding-top: env(safe-area-inset-top, var(--space-lg));
    padding-bottom: env(safe-area-inset-bottom, var(--space-md));
    padding-left: var(--space-md);
    padding-right: var(--space-md);
  }
  
  /* Ensure header with close button is accessible at top */
  .modal-overlay .content-pane .card-header--with-close {
    position: relative;
    margin-top: 0;
    padding-top: var(--space-md);
  }
  
  /* Ensure footer buttons are accessible at bottom */
  .modal-overlay .content-pane .card-footer {
    padding-bottom: var(--space-md);
    margin-bottom: 0;
  }
  
  /* Account for NavBar on mobile - but keep vertical centering */
  /* NOTE: This rule is overridden in responsive.css for better mobile UX */
  .container.flex.flex-column.flex-center {
    padding-top: 60px; /* Account for NavBar - overridden in responsive.css */
    /* Keep justify-content: center to prevent jumping to top */
    /* min-height ensures content doesn't get cut off */
    min-height: calc(100vh - 60px);
  }
  
  /* Use max-width instead of fixed width to prevent jumps */
  /* Allow container to grow to 95vw before constraining content */
  .container .content-pane {
    margin: var(--space-md) auto;
    /*max-width: min(95vw, calc(100% - var(--space-md) * 2));*/
    max-width: 95vw;
    overflow-x: visible; /* Allow game board to extend if needed */
  }
  
  /* OverPage mobile adjustments */
  .over-page .content-pane--wide {
    /*max-width: min(95vw, calc(100% - var(--space-md) * 2));*/
    max-width: 95vw;
  }
}

/* EOF */
